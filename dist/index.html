<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GIIIN/ギイーン - 議員活動を身近に</title>
    
    <!-- DNS プリコネクト（最優先） -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- メタ情報 -->
    <meta name="description" content="議員の活動を身近に感じられるプラットフォーム。質問・回答の検索、議員情報の確認、統計データの閲覧が可能です。">
    <meta name="keywords" content="議員,政治,質問,回答,統計,地方自治">
    <meta name="author" content="GIIIN">
    
    <!-- OGP -->
    <meta property="og:title" content="GIIIN/ギイーン - 議員活動を身近に">
    <meta property="og:description" content="議員の活動を身近に感じられるプラットフォーム">
    <meta property="og:type" content="website">
    <meta property="og:image" content="/og-preview.png">
    
    <!-- パフォーマンス最適化 -->
    <meta name="theme-color" content="#4c1d95">
    
    <!-- 初期表示用のインラインCSS（フォールバック） -->
    <style>
      /* 初期表示用のシステムフォント */
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
        font-display: swap;
        background: linear-gradient(135deg, #0f0c29 0%, #24243e 25%, #302b63 50%, #0f3460 75%, #0a2472 100%);
        color: #f8fafc;
        margin: 0;
        padding: 0;
        min-height: 100vh;
        /* フォント最適化 */
        text-rendering: optimizeLegibility;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      
      /* 初期ローディング画面 */
      .initial-loading {
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        flex-direction: column;
        gap: 1rem;
      }
      
      .loading-spinner {
        width: 40px;
        height: 40px;
        border: 3px solid rgba(245, 158, 11, 0.3);
        border-top: 3px solid #f59e0b;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }
      
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      
      .loading-text {
        color: #f59e0b;
        font-size: 1.2rem;
        font-weight: 600;
      }
      
      /* フォント読み込み完了後に非表示 */
      .fonts-loaded .initial-loading {
        display: none;
      }
      
      /* アプリコンテンツは最初は非表示 */
      #root {
        opacity: 0;
        transition: opacity 0.3s ease-in-out;
      }
      
      .fonts-loaded #root {
        opacity: 1;
      }
    </style>
    <script type="module" crossorigin src="/assets/index-CObOe_6Q.js"></script>
    <link rel="stylesheet" crossorigin href="/assets/index-Bj48jNav.css">
  </head>
  <body>
    <!-- 初期ローディング画面 -->
    <div class="initial-loading">
      <div class="loading-spinner"></div>
      <div class="loading-text">GIIIN/ギイーン 読み込み中...</div>
    </div>
    
    <div id="root"></div>
    
    <!-- フォント非同期読み込み -->
    <script>
      // フォント読み込み関数
      function loadFonts() {
        // 重要なフォントのみを非同期で読み込み
        const fontLinks = [
          'https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap&subset=japanese',
          'https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&display=swap&subset=latin'
        ];
        
        fontLinks.forEach(href => {
          const link = document.createElement('link');
          link.rel = 'stylesheet';
          link.href = href;
          link.media = 'print'; // 最初は print メディアで読み込み
          link.onload = function() {
            this.media = 'all'; // 読み込み完了後に all に変更
          };
          document.head.appendChild(link);
        });
      }
      
      // フォント読み込み完了検知
      function checkFontsLoaded() {
        if ('fonts' in document) {
          // Font Loading API が利用可能な場合
          Promise.all([
            document.fonts.load('400 1em "Noto Sans JP"'),
            document.fonts.load('700 1em "Noto Sans JP"'),
            document.fonts.load('400 1em "Cinzel"'),
            document.fonts.load('600 1em "Cinzel"')
          ]).then(() => {
            document.documentElement.classList.add('fonts-loaded');
          }).catch(() => {
            // フォント読み込み失敗時も表示を続行
            document.documentElement.classList.add('fonts-loaded');
          });
        } else {
          // Font Loading API 非対応の場合は2秒後に強制適用
          setTimeout(() => {
            document.documentElement.classList.add('fonts-loaded');
          }, 2000);
        }
      }
      
      // DOMContentLoaded 後にフォント読み込み開始
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => {
          loadFonts();
          checkFontsLoaded();
        });
      } else {
        loadFonts();
        checkFontsLoaded();
      }
      
      // 最大3秒でタイムアウト（ネットワークが遅い場合の保険）
      setTimeout(() => {
        if (!document.documentElement.classList.contains('fonts-loaded')) {
          document.documentElement.classList.add('fonts-loaded');
        }
      }, 3000);
    </script>
  </body>
</html>
